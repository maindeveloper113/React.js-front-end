function closeAllFilters(){$(".filter").removeClass("filter_opened"),$.each($(".topbar__block"),function(e,t){var i=$(t).attr("class").split(" ");4==i.length&&$(t).removeClass(i[1]+"-active"),$(t).hasClass("topbar__block_opened")&&$(t).removeClass("topbar__block_opened")})}function showFilter(e){var t=$(e);t.is(":hidden")?(closeAllFilters(),t.addClass("filter_opened")):t.removeClass("filter_opened")}function filterSearch(e,t){var i=$(t);$.each(i,function(t,i){var a=$(i).text().toLowerCase(),l=a.indexOf(e.toLowerCase());l+1?$(i).show():$(i).hide()})}function fullscreenEnable(e,t){var i=$(".detail"),a=$(".detail__info"),l=$(".detail__icons"),o=$(".detail__content-wrap"),n=$(".detail__nav"),r=$(".detail__views"),s=$(".detail__ico_dots");i.addClass("detail_fullscreen"),a.addClass("detail__info_fullscreen"),l.addClass("detail__icons_fullscreen"),o.addClass("detail__content-wrap_fullscreen"),n.addClass("detail__nav_fullscreen"),r.addClass("detail__views_fullscreen"),s.addClass("detail__ico_dots-fullscreen"),setTimeout(function(){e.data("owlCarousel").reinit(),initStreetView(t),initSmallMap(t)},500)}function fullscreenDisable(e,t){var i=$(".detail"),a=$(".detail__info"),l=$(".detail__icons"),o=$(".detail__content-wrap"),n=$(".detail__nav"),r=$(".detail__views"),s=$(".detail__ico_dots");i.removeClass("detail_fullscreen"),a.removeClass("detail__info_fullscreen"),l.removeClass("detail__icons_fullscreen"),o.removeClass("detail__content-wrap_fullscreen"),n.removeClass("detail__nav_fullscreen"),r.removeClass("detail__views_fullscreen"),s.removeClass("detail__ico_dots-fullscreen"),setTimeout(function(){e.data("owlCarousel").reinit(),initStreetView(t),initSmallMap(t)},500)}function getOfferId(e){var t=$(e),i=t.attr("class");return"infowindow"==i?t.data("offer"):i.indexOf("full-list")+1?t.closest(".full-list__item").data("offer"):i.indexOf("grid")+1?t.closest(".grid__item").data("offer"):i.indexOf("list")+1?t.closest(".list__item").data("offer"):void 0}function initStreetView(e){var t=document.getElementById("panorama");$(t).html("");var i=new google.maps.StreetViewPanorama(t,{zoom:1});i.setPosition(e)}function initSmallMap(e){var t=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}],i={zoom:18,center:e,scrollwheel:!1,mapTypeControl:!1,streetViewControl:!1,zoomControl:!1,styles:t},a=new google.maps.Map(document.getElementById("small-map"),i),l="/app/i/min/map-marker.png";new google.maps.Marker({position:e,map:a,icon:l})}$(document).ready(function(){if($("#owl-slider").length)var e=$("#owl-slider").owlCarousel({pagination:!1,navigation:!0,navigationText:["",""],slideSpeed:300,paginationSpeed:400,singleItem:!0});var t={lat:42.345573,lng:-71.098326};$("body").on("click",".infowindow, .list__image-wrap, .list__title, .grid__image-wrap, .grid__title, .full-list__image-wrap, .full-list__title",function(i){i.preventDefault();var a=(getOfferId($(this)),$(".view")),l=$(".detail"),o=$(".gm-style-iw").next();closeAllFilters(),fullscreenDisable(e,t),o.click(),a.fadeOut(300),l.fadeIn(300)}),$(".controls__back").click(function(){var e=$(".view"),t=$(".detail");e.fadeIn(300),t.fadeOut(300)}),$(".detail__nav-item").click(function(e){e.preventDefault();var t=$(this).index(),i=$(".detail__nav-item"),a=$(".detail__tab");i.removeClass("detail__nav-item_active"),$(this).addClass("detail__nav-item_active"),a.hide(),a.eq(t).show()}),$(".detail__views .detail__ico").click(function(){var e=$(".detail__views .detail__ico"),i=$(this).index(),a=$(".detail__content-tab");e.removeClass("detail__ico_active"),$(this).addClass("detail__ico_active"),a.removeClass("detail__content-tab_active"),a.eq(i).addClass("detail__content-tab_active"),"panorama"==a.eq(i).attr("id")&&initStreetView(t),"small-map"==a.eq(i).attr("id")&&initSmallMap(t)}),$(".detail__ico_dots").click(function(){var e=$(".detail__icons");e.toggleClass("detail__icons_opened")}),$(".controls__size").click(function(){var i=$(".detail");i.hasClass("detail_fullscreen")?fullscreenDisable(e,t):fullscreenEnable(e,t)})}),$(document).ready(function(){if($(".topbar__form").submit(function(e){e.preventDefault(),console.log("search form submit")}),$(".topbar__ico_search").click(function(){$(".topbar__form").submit()}),$(".topbar__block_visibility").click(function(){var e=$(".visibility");showFilter(e),$(this).toggleClass("topbar__block_opened"),$(this).toggleClass("topbar__block_visibility-active")}),$(".visibility__item").click(function(){$(".visibility__item").removeClass("visibility__item_active"),$(this).addClass("visibility__item_active");var e=$(this).data("view"),t=$(".view"),i=$(".detail"),a=$(".list"),l=$(".full-list"),o=$(".grid");"map"==e?(t.fadeOut(300),a.removeClass("list_opened"),l.removeClass("full-list_opened"),o.removeClass("grid_opened")):"list-map"==e?(a.perfectScrollbar(),a.addClass("list_opened"),l.removeClass("full-list_opened"),o.removeClass("grid_opened"),t.fadeIn(300)):"list"==e?(l.perfectScrollbar(),l.addClass("full-list_opened"),a.removeClass("list_opened"),o.removeClass("grid_opened"),t.fadeIn(300)):"grid"==e&&(o.perfectScrollbar(),o.addClass("grid_opened"),a.removeClass("list_opened"),l.removeClass("full-list_opened"),t.fadeIn(300)),i.fadeOut(300),closeAllFilters()}),$(".topbar__block_prop").click(function(){var e=$(".prop");showFilter(e),$(this).toggleClass("topbar__block_opened"),$(this).toggleClass("topbar__block_prop-active")}),$(".topbar__block_sort").click(function(){var e=$(".sort");showFilter(e),$(this).toggleClass("topbar__block_opened"),$(this).toggleClass("topbar__block_sort-active")}),$(".box__search-input").val(""),$(".topbar__block_saved-search").click(function(){var e=$(".box");showFilter(e),$(this).toggleClass("topbar__block_opened"),$(this).toggleClass("topbar__block_saved-search-active")}),$(".box__search-input").keyup(function(){var e=$(this).val(),t=$(".box__item");filterSearch(e,t)}),$(".box__garbage").click(function(){$(this).parent().remove()}),$(".box__plus").click(function(){$(".overlay").fadeIn(300),$(".popup").fadeIn(600)}),$(".popup__close, .popup__cancel-button").click(function(){$(".overlay").fadeOut(300),$(".popup").fadeOut(300)}),$(".heart__search-input").val(""),$(".topbar__block_heart").click(function(){var e=$(".heart");showFilter(e),$(this).toggleClass("topbar__block_opened"),$(this).toggleClass("topbar__block_heart-active")}),$(".heart__search-input").keyup(function(){var e=$(this).val(),t=$(".heart__item");filterSearch(e,t)}),$(".heart__garbage").click(function(){$(this).parent().remove()}),$(".prop").length){var e=document.getElementById("priceSlider");noUiSlider.create(e,{start:[50,5e5],range:{min:0,max:5e5}});var t=[document.getElementById("fromPrice"),document.getElementById("toPrice")];e.noUiSlider.on("update",function(e,i){t[i].innerHTML="$"+Math.round(e[i])});var i=document.getElementById("bedSlider");noUiSlider.create(i,{start:[1,6],step:1,range:{min:0,max:7}});var a=[document.getElementById("fromBed"),document.getElementById("toBed")];i.noUiSlider.on("update",function(e,t){a[t].innerHTML=Math.round(e[t])});var l=document.getElementById("bathSlider");noUiSlider.create(l,{start:[1,6],step:1,range:{min:0,max:7}});var o=[document.getElementById("fromBath"),document.getElementById("toBath")];l.noUiSlider.on("update",function(e,t){o[t].innerHTML=Math.round(e[t])})}}),$(document).ready(function(){if($(".login").click(function(){var e=$(".auth"),t=$(".overlay");t.fadeIn(300),e.fadeIn(600)}),$(".auth__header-tab").click(function(){var e=$(".auth__header-tab"),t=$(".auth__form"),i=$(this).index();e.removeClass("auth__header-tab_active"),$(this).addClass("auth__header-tab_active"),t.hide(),t.eq(i).show()}),$(".auth__close").click(function(){var e=$(".auth"),t=$(".overlay");t.fadeOut(300),e.fadeOut(300)}),$(".main-filter__other").click(function(){var e=$(".main-filter__features");$(this).toggleClass("main-filter__other_opened"),e.is(":visible")?e.fadeOut(300):e.fadeIn(150)}),$(".owl-carousel").owlCarousel({items:3}),$(".main-filter").length){var e=document.getElementById("priceSlider");noUiSlider.create(e,{start:[50,5e5],range:{min:0,max:5e5}});var t=[document.getElementById("fromPrice"),document.getElementById("toPrice")];e.noUiSlider.on("update",function(e,i){t[i].innerHTML="$"+Math.round(e[i])});var i=document.getElementById("bedSlider");noUiSlider.create(i,{start:[1,6],step:1,range:{min:0,max:7}});var a=[document.getElementById("fromBed"),document.getElementById("toBed")];i.noUiSlider.on("update",function(e,t){a[t].innerHTML=Math.round(e[t])});var l=document.getElementById("bathSlider");noUiSlider.create(l,{start:[1,6],step:1,range:{min:0,max:7}});var o=[document.getElementById("fromBath"),document.getElementById("toBath")];l.noUiSlider.on("update",function(e,t){o[t].innerHTML=Math.round(e[t])});var n=document.getElementById("otherSlider");noUiSlider.create(n,{start:[50,5e5],range:{min:0,max:5e5}});var r=[document.getElementById("fromOther"),document.getElementById("toOther")];n.noUiSlider.on("update",function(e,t){r[t].innerHTML="$"+Math.round(e[t])})}}),$(document).ready(function(){if($("#map").length){var e=$(".header-wrap").height(),t=$(".topbar-wrap").height(),i=$(".footer-wrap").height(),a=e+t+i;$(".map-wrap").css("height",$(window).height()-a);var l=new google.maps.InfoWindow,o=new google.maps.LatLng(40.71293,(-74.006304)),n=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}],r={zoom:12,center:o,scrollwheel:!1,mapTypeControl:!1,streetViewControl:!1,zoomControl:!1,styles:n},s=new google.maps.Map(document.getElementById("map"),r),d="/app/i/min/map-marker.png",c=[{id:7,location:{lat:40.71293,lng:-74.006304}},{id:8,location:{lat:40.71274,lng:-74.036304}}],_=c.map(function(e){return new google.maps.Marker({position:e.location,icon:d,offerID:e.id})}),f=[{url:"/app/i/min/cluster_icon.png",anchor:[18,0],iconAnchor:[50,66],height:"84",width:"50",textColor:"#fff",textSize:"14"}];_.forEach(function(e){google.maps.event.addListener(e,"click",function(){var t=document.getElementById("map").clientHeight,i=150;s.setCenter(e.getPosition()),s.panBy(0,-(t/2-i));var a=this.offerID,o="/app/i/user_files/chicago.jpg",n="Design place apartment",r="$967,000",d="$7,600/sqft",c="Quincy St, Brooklyn, NY, USA",_="Beds: 4, Baths: 2, Sq Ft: 3480",f="Apartment",p='<a href="#" data-offer="'+a+'" class="infowindow"><div class="infowindow__image-wrap"><img src="'+o+'" class="infowindow__image"/><span class="infowindow__price">'+r+'</span><span class="infowindow__price infowindow__price__sqft">'+d+'</span></div><div class="infowindow__title">'+n+'</div><div class="infowindow__address">'+c+'</div><div class="infowindow__props">'+_+'</div><div class="infowindow__type">'+f+"</div></a>";l.setContent(p),l.open(s,e);var m=$(".gm-style-iw");m.prev().remove(),m.next().css({top:"39px",right:"31px"}),m.css({top:"35px",left:"25px",overflow:"visible"}),m.children().css("overflow","visible"),m.children().children().css("overflow","visible")})});var p=new MarkerClusterer(s,_);p.setStyles(f)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5qcyIsImRldGFpbC5qcyIsImZpbHRlcnMuanMiLCJpbmRleC5qcyIsIm1hcC5qcyJdLCJuYW1lcyI6WyJjbG9zZUFsbEZpbHRlcnMiLCIkIiwicmVtb3ZlQ2xhc3MiLCJlYWNoIiwiaSIsImJsb2NrIiwiY2xhc3NlcyIsImF0dHIiLCJzcGxpdCIsImxlbmd0aCIsImhhc0NsYXNzIiwic2hvd0ZpbHRlciIsInRhZyIsIiRmaWx0ZXIiLCJpcyIsImFkZENsYXNzIiwiZmlsdGVyU2VhcmNoIiwidmFsdWUiLCIkaXRlbSIsIml0ZW0iLCJ0ZXh0IiwidG9Mb3dlckNhc2UiLCJwb3MiLCJpbmRleE9mIiwic2hvdyIsImhpZGUiLCJmdWxsc2NyZWVuRW5hYmxlIiwib3dsIiwibG9jYXRpb24iLCIkZGV0YWlsIiwiJGluZm8iLCIkaWNvbnMiLCIkY29udGVudFdyYXAiLCIkbmF2IiwiJHZpZXdzIiwiJGRvdHMiLCJzZXRUaW1lb3V0IiwiZGF0YSIsInJlaW5pdCIsImluaXRTdHJlZXRWaWV3IiwiaW5pdFNtYWxsTWFwIiwiZnVsbHNjcmVlbkRpc2FibGUiLCJnZXRPZmZlcklkIiwiJGVsZW0iLCJlbGVtQ2xhc3MiLCJjbG9zZXN0IiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImh0bWwiLCJwYW5vcmFtYSIsImdvb2dsZSIsIm1hcHMiLCJTdHJlZXRWaWV3UGFub3JhbWEiLCJ6b29tIiwic2V0UG9zaXRpb24iLCJzdHlsZXMiLCJmZWF0dXJlVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsImNvbG9yIiwidmlzaWJpbGl0eSIsInNhdHVyYXRpb24iLCJsaWdodG5lc3MiLCJtYXBPcHRpb25zIiwiY2VudGVyIiwic2Nyb2xsd2hlZWwiLCJtYXBUeXBlQ29udHJvbCIsInN0cmVldFZpZXdDb250cm9sIiwiem9vbUNvbnRyb2wiLCJtYXAiLCJNYXAiLCJtYXJrZXJJY28iLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJyZWFkeSIsIm93bENhcm91c2VsIiwicGFnaW5hdGlvbiIsIm5hdmlnYXRpb24iLCJuYXZpZ2F0aW9uVGV4dCIsInNsaWRlU3BlZWQiLCJwYWdpbmF0aW9uU3BlZWQiLCJzaW5nbGVJdGVtIiwibGF0IiwibG5nIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCIkdmlldyIsInRoaXMiLCIkaW5mb1dpbmRvd0Nsb3NlIiwibmV4dCIsImNsaWNrIiwiZmFkZU91dCIsImZhZGVJbiIsImluZGV4IiwiJG5hdkl0ZW0iLCIkdGFiIiwiZXEiLCIkdGFicyIsInRvZ2dsZUNsYXNzIiwic3VibWl0IiwiY29uc29sZSIsImxvZyIsInR5cGUiLCIkbGlzdCIsIiRmdWxsTGlzdCIsIiRncmlkIiwicGVyZmVjdFNjcm9sbGJhciIsInZhbCIsImtleXVwIiwicGFyZW50IiwicmVtb3ZlIiwicHJpY2VTbGlkZXIiLCJub1VpU2xpZGVyIiwiY3JlYXRlIiwic3RhcnQiLCJyYW5nZSIsIm1pbiIsIm1heCIsInByaWNlU2xpZGVyVmFsdWVzIiwidmFsdWVzIiwiaGFuZGxlIiwiaW5uZXJIVE1MIiwiTWF0aCIsInJvdW5kIiwiYmVkU2xpZGVyIiwic3RlcCIsImJlZFNsaWRlclZhbHVlcyIsImJhdGhTbGlkZXIiLCJiYXRoU2xpZGVyVmFsdWVzIiwiJHBvcHVwIiwiJG92ZXJsYXkiLCIkZm9ybXMiLCIkZmVhdHVyZXMiLCJpdGVtcyIsIm90aGVyU2xpZGVyIiwib3RoZXJTbGlkZXJWYWx1ZXMiLCJoZWFkZXIiLCJoZWlnaHQiLCJ0b3BiYXIiLCJmb290ZXIiLCJjc3MiLCJ3aW5kb3ciLCJpbmZvV2luZG93IiwiSW5mb1dpbmRvdyIsIm15TGF0bG5nIiwiTGF0TG5nIiwib2ZmZXJzIiwiaWQiLCJtYXJrZXJzIiwib2ZmZXIiLCJvZmZlcklEIiwiY2x1c3Rlck9wdGlvbnMiLCJ1cmwiLCJhbmNob3IiLCJpY29uQW5jaG9yIiwid2lkdGgiLCJ0ZXh0Q29sb3IiLCJ0ZXh0U2l6ZSIsImZvckVhY2giLCJtYXJrZXIiLCJldmVudCIsImFkZExpc3RlbmVyIiwibWFwSGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwib2Zmc2V0RnJvbU1hcEJvdHRvbSIsInNldENlbnRlciIsImdldFBvc2l0aW9uIiwicGFuQnkiLCJpbWFnZSIsInRpdGxlIiwicHJpY2UiLCJwcmljZVNxZnQiLCJhZGRyZXNzIiwicHJvcHMiLCJjb250ZW50U3RyaW5nIiwic2V0Q29udGVudCIsIm9wZW4iLCIkZ21TdHlsZSIsInByZXYiLCJ0b3AiLCJyaWdodCIsImxlZnQiLCJvdmVyZmxvdyIsImNoaWxkcmVuIiwibWFya2VyQ2x1c3RlciIsIk1hcmtlckNsdXN0ZXJlciIsInNldFN0eWxlcyJdLCJtYXBwaW5ncyI6IkFBQ0EsUUFBQUEsbUJBQ0FDLEVBQUEsV0FBQUMsWUFBQSxpQkFDQUQsRUFBQUUsS0FBQUYsRUFBQSxrQkFBQSxTQUFBRyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFMLEVBQUFJLEdBQUFFLEtBQUEsU0FBQUMsTUFBQSxJQUNBLElBQUFGLEVBQUFHLFFBQ0FSLEVBQUFJLEdBQUFILFlBQUFJLEVBQUEsR0FBQSxXQUVBTCxFQUFBSSxHQUFBSyxTQUFBLHlCQUNBVCxFQUFBSSxHQUFBSCxZQUFBLDBCQUtBLFFBQUFTLFlBQUFDLEdBQ0EsR0FBQUMsR0FBQVosRUFBQVcsRUFDQUMsR0FBQUMsR0FBQSxZQUNBZCxrQkFDQWEsRUFBQUUsU0FBQSxrQkFFQUYsRUFBQVgsWUFBQSxpQkFJQSxRQUFBYyxjQUFBQyxFQUFBTCxHQUNBLEdBQUFNLEdBQUFqQixFQUFBVyxFQUNBWCxHQUFBRSxLQUFBZSxFQUFBLFNBQUFkLEVBQUFlLEdBQ0EsR0FBQUMsR0FBQW5CLEVBQUFrQixHQUFBQyxPQUFBQyxjQUNBQyxFQUFBRixFQUFBRyxRQUFBTixFQUFBSSxjQUNBQyxHQUFBLEVBQ0FyQixFQUFBa0IsR0FBQUssT0FFQXZCLEVBQUFrQixHQUFBTSxTQU1BLFFBQUFDLGtCQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUE1QixFQUFBLFdBQ0E2QixFQUFBN0IsRUFBQSxpQkFD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LE9BQUFzSCxhQUNBQyxFQUFBLEdBQ0FqRyxHQUFBa0csVUFBQU4sRUFBQU8sZUFDQW5HLEVBQUFvRyxNQUFBLElBQUFMLEVBQUEsRUFBQUUsR0FFQSxJQUFBakIsR0FBQTVELEtBQUErRCxRQUNBa0IsRUFBQSxnQ0FDQUMsRUFBQSx5QkFDQUMsRUFBQSxXQUNBQyxFQUFBLGNBQ0FDLEVBQUEsK0JBQ0FDLEVBQUEsaUNBQ0F2RSxFQUFBLFlBQ0F3RSxFQUNBLDJCQUFBM0IsRUFBQSxzRUFFQXFCLEVBQUEsZ0VBQ0FFLEVBQUEsa0VBQ0FDLEVBQUEsK0NBRUFGLEVBQUEsMENBQ0FHLEVBQUEsd0NBQ0FDLEVBQUEsdUNBQ0F2RSxFQUFBLFlBR0F3QyxHQUFBaUMsV0FBQUQsR0FDQWhDLEVBQUFrQyxLQUFBN0csRUFBQTRGLEVBRUEsSUFBQWtCLEdBQUFuTCxFQUFBLGVBQ0FtTCxHQUFBQyxPQUFBcEUsU0FDQW1FLEVBQUF4RixPQUFBbUQsS0FBQXVDLElBQUEsT0FBQUMsTUFBQSxTQUNBSCxFQUFBckMsS0FBQXVDLElBQUEsT0FBQUUsS0FBQSxPQUFBQyxTQUFBLFlBQ0FMLEVBQUFNLFdBQUEzQyxJQUFBLFdBQUEsV0FDQXFDLEVBQUFNLFdBQUFBLFdBQUEzQyxJQUFBLFdBQUEsY0FHQSxJQUFBNEMsR0FBQSxHQUFBQyxpQkFBQXRILEVBQUFpRixFQUNBb0MsR0FBQUUsVUFBQW5DIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2Nsb3NlIGFsbCBmaWx0ZXJzIGFuZCBzZXQgZGVmYXVsdCBzdGF0ZSB0byBpY29uc1xuZnVuY3Rpb24gY2xvc2VBbGxGaWx0ZXJzKCl7XG4gICAgJCgnLmZpbHRlcicpLnJlbW92ZUNsYXNzKCdmaWx0ZXJfb3BlbmVkJyk7XG4gICAgJC5lYWNoKCQoJy50b3BiYXJfX2Jsb2NrJyksIGZ1bmN0aW9uKGksIGJsb2NrKSB7XG4gICAgICAgIHZhciBjbGFzc2VzID0gJChibG9jaykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpO1xuICAgICAgICBpZiAoY2xhc3Nlcy5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgJChibG9jaykucmVtb3ZlQ2xhc3MoY2xhc3Nlc1sxXSArICctYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoYmxvY2spLmhhc0NsYXNzKCd0b3BiYXJfX2Jsb2NrX29wZW5lZCcpKSB7XG4gICAgICAgICAgICAkKGJsb2NrKS5yZW1vdmVDbGFzcygndG9wYmFyX19ibG9ja19vcGVuZWQnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy9jbG9zZSBvciBvcGVuIGFueSBmaWx0ZXIgYXQgbWFwIHBhZ2VcbmZ1bmN0aW9uIHNob3dGaWx0ZXIodGFnKSB7XG4gICAgdmFyICRmaWx0ZXIgPSAkKHRhZyk7XG4gICAgaWYgKCRmaWx0ZXIuaXMoJzpoaWRkZW4nKSkge1xuICAgICAgICBjbG9zZUFsbEZpbHRlcnMoKTtcbiAgICAgICAgJGZpbHRlci5hZGRDbGFzcygnZmlsdGVyX29wZW5lZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICRmaWx0ZXIucmVtb3ZlQ2xhc3MoJ2ZpbHRlcl9vcGVuZWQnKTtcbiAgICB9XG59XG4vL2ZpbmQgdGV4dCBlbnRyeVxuZnVuY3Rpb24gZmlsdGVyU2VhcmNoKHZhbHVlLCB0YWcpe1xuICAgIHZhciAkaXRlbSA9ICQodGFnKTtcbiAgICAkLmVhY2goJGl0ZW0sIGZ1bmN0aW9uKGksIGl0ZW0pe1xuICAgICAgICB2YXIgdGV4dCA9ICQoaXRlbSkudGV4dCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBwb3MgPSB0ZXh0LmluZGV4T2YodmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChwb3MgKyAxKSB7XG4gICAgICAgICAgICAkKGl0ZW0pLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoaXRlbSkuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vb3BlbiBkZXRhaWwgaXRlbSBvbiBmdWxsIHNjcmVlblxuZnVuY3Rpb24gZnVsbHNjcmVlbkVuYWJsZShvd2wsIGxvY2F0aW9uKSB7XG4gICAgdmFyICRkZXRhaWwgPSAkKCcuZGV0YWlsJyksXG4gICAgICAgICRpbmZvID0gJCgnLmRldGFpbF9faW5mbycpLFxuICAgICAgICAkaWNvbnMgPSAkKCcuZGV0YWlsX19pY29ucycpLFxuICAgICAgICAkY29udGVudFdyYXAgPSAkKCcuZGV0YWlsX19jb250ZW50LXdyYXAnKSxcbiAgICAgICAgJG5hdiA9ICQoJy5kZXRhaWxfX25hdicpLFxuICAgICAgICAkdmlld3MgPSAkKCcuZGV0YWlsX192aWV3cycpLFxuICAgICAgICAkZG90cyA9ICQoJy5kZXRhaWxfX2ljb19kb3RzJyk7XG4gICAgJGRldGFpbC5hZGRDbGFzcygnZGV0YWlsX2Z1bGxzY3JlZW4nKTtcbiAgICAkaW5mby5hZGRDbGFzcygnZGV0YWlsX19pbmZvX2Z1bGxzY3JlZW4nKTtcbiAgICAkaWNvbnMuYWRkQ2xhc3MoJ2RldGFpbF9faWNvbnNfZnVsbHNjcmVlbicpO1xuICAgICRjb250ZW50V3JhcC5hZGRDbGFzcygnZGV0YWlsX19jb250ZW50LXdyYXBfZnVsbHNjcmVlbicpO1xuICAgICRuYXYuYWRkQ2xhc3MoJ2RldGFpbF9fbmF2X2Z1bGxzY3JlZW4nKTtcbiAgICAkdmlld3MuYWRkQ2xhc3MoJ2RldGFpbF9fdmlld3NfZnVsbHNjcmVlbicpO1xuICAgICRkb3RzLmFkZENsYXNzKCdkZXRhaWxfX2ljb19kb3RzLWZ1bGxzY3JlZW4nKTtcbiAgICAvL3JlaW5pdCBzdHJlZXQgdmlldyBhbmQgc21hbGwgbWFwIGFmdGVyIHRyYW5zaXRpb25cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIG93bC5kYXRhKCdvd2xDYXJvdXNlbCcpLnJlaW5pdCgpO1xuICAgICAgICBpbml0U3RyZWV0Vmlldyhsb2NhdGlvbik7XG4gICAgICAgIGluaXRTbWFsbE1hcChsb2NhdGlvbik7XG4gICAgfSwgNTAwKTtcbn1cblxuZnVuY3Rpb24gZnVsbHNjcmVlbkRpc2FibGUob3dsLCBsb2NhdGlvbikge1xuICAgIHZhciAkZGV0YWlsID0gJCgnLmRldGFpbCcpLFxuICAgICAgICAkaW5mbyA9ICQoJy5kZXRhaWxfX2luZm8nKSxcbiAgICAgICAgJGljb25zID0gJCgnLmRldGFpbF9faWNvbnMnKSxcbiAgICAgICAgJGNvbnRlbnRXcmFwID0gJCgnLmRldGFpbF9fY29udGVudC13cmFwJyksXG4gICAgICAgICRuYXYgPSAkKCcuZGV0YWlsX19uYXYnKSxcbiAgICAgICAgJHZpZXdzID0gJCgnLmRldGFpbF9fdmlld3MnKSxcbiAgICAgICAgJGRvdHMgPSAkKCcuZGV0YWlsX19pY29fZG90cycpO1xuICAgICRkZXRhaWwucmVtb3ZlQ2xhc3MoJ2RldGFpbF9mdWxsc2NyZWVuJyk7XG4gICAgJGluZm8ucmVtb3ZlQ2xhc3MoJ2RldGFpbF9faW5mb19mdWxsc2NyZWVuJyk7XG4gICAgJGljb25zLnJlbW92ZUNsYXNzKCdkZXRhaWxfX2ljb25zX2Z1bGxzY3JlZW4nKTtcbiAgICAkY29udGVudFdyYXAucmVtb3ZlQ2xhc3MoJ2RldGFpbF9fY29udGVudC13cmFwX2Z1bGxzY3JlZW4nKTtcbiAgICAkbmF2LnJlbW92ZUNsYXNzKCdkZXRhaWxfX25hdl9mdWxsc2NyZWVuJyk7XG4gICAgJHZpZXdzLnJlbW92ZUNsYXNzKCdkZXRhaWxfX3ZpZXdzX2Z1bGxzY3JlZW4nKTtcbiAgICAkZG90cy5yZW1vdmVDbGFzcygnZGV0YWlsX19pY29fZG90cy1mdWxsc2NyZWVuJyk7XG4gICAgLy9yZWluaXQgc3RyZWV0IHZpZXcgYW5kIHNtYWxsIG1hcCBhZnRlciB0cmFuc2l0aW9uXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBvd2wuZGF0YSgnb3dsQ2Fyb3VzZWwnKS5yZWluaXQoKTtcbiAgICAgICAgaW5pdFN0cmVldFZpZXcobG9jYXRpb24pO1xuICAgICAgICBpbml0U21hbGxNYXAobG9jYXRpb24pO1xuICAgIH0sIDUwMCk7IC8vYWZ0ZXIgdHJhbnNpdGlvblxufVxuXG4vL0lEIG9mIGl0ZW1cbmZ1bmN0aW9uIGdldE9mZmVySWQodGFnKSB7XG4gICAgdmFyICRlbGVtID0gJCh0YWcpLFxuICAgICAgICBlbGVtQ2xhc3MgPSAkZWxlbS5hdHRyKCdjbGFzcycpO1xuICAgIGlmIChlbGVtQ2xhc3MgPT0gJ2luZm93aW5kb3cnKVxuICAgICAgICByZXR1cm4gJGVsZW0uZGF0YSgnb2ZmZXInKTtcbiAgICBlbHNlIGlmIChlbGVtQ2xhc3MuaW5kZXhPZignZnVsbC1saXN0JykgKyAxKVxuICAgICAgICByZXR1cm4gJGVsZW0uY2xvc2VzdCgnLmZ1bGwtbGlzdF9faXRlbScpLmRhdGEoJ29mZmVyJyk7XG4gICAgZWxzZSBpZiAoZWxlbUNsYXNzLmluZGV4T2YoJ2dyaWQnKSArIDEpXG4gICAgICAgIHJldHVybiAkZWxlbS5jbG9zZXN0KCcuZ3JpZF9faXRlbScpLmRhdGEoJ29mZmVyJyk7XG4gICAgZWxzZSBpZiAoZWxlbUNsYXNzLmluZGV4T2YoJ2xpc3QnKSArIDEpXG4gICAgICAgIHJldHVybiAkZWxlbS5jbG9zZXN0KCcubGlzdF9faXRlbScpLmRhdGEoJ29mZmVyJyk7XG59XG5cbmZ1bmN0aW9uIGluaXRTdHJlZXRWaWV3KGxvY2F0aW9uKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5vcmFtYScpO1xuICAgICQoY29udGFpbmVyKS5odG1sKCcnKTtcbiAgICB2YXIgcGFub3JhbWEgPSBuZXcgZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1Bhbm9yYW1hKFxuICAgICAgICBjb250YWluZXIsIHtcbiAgICAgICAgICAgIHpvb206IDFcbiAgICAgICAgfSk7XG4gICAgcGFub3JhbWEuc2V0UG9zaXRpb24obG9jYXRpb24pO1xufVxuXG5mdW5jdGlvbiBpbml0U21hbGxNYXAobG9jYXRpb24pIHtcbiAgICB2YXIgc3R5bGVzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM0NDQ0NDRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjJmMmYyXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NDV9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMuaWNvblwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM0NmJjZWNcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfV07XG4gICAgdmFyIG1hcE9wdGlvbnMgPSB7XG4gICAgICAgIHpvb206IDE4LFxuICAgICAgICBjZW50ZXI6IGxvY2F0aW9uLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2UsXG4gICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuICAgICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICAgIHN0eWxlcyA6IHN0eWxlc1xuICAgIH07XG4gICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbWFsbC1tYXBcIiksIG1hcE9wdGlvbnMpO1xuICAgIHZhciBtYXJrZXJJY28gPSAnL2FwcC9pL21pbi9tYXAtbWFya2VyLnBuZyc7XG4gICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICBwb3NpdGlvbjpsb2NhdGlvbixcbiAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgIGljb246IG1hcmtlckljb1xuICAgIH0pO1xuXG59IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblxuICAgIGlmICgkKCcjb3dsLXNsaWRlcicpLmxlbmd0aCkge1xuICAgICAgICB2YXIgb3dsID0gJChcIiNvd2wtc2xpZGVyXCIpLm93bENhcm91c2VsKHtcbiAgICAgICAgICAgIHBhZ2luYXRpb24gOiBmYWxzZSxcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHRydWUsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uVGV4dCA6IFtcIlwiLFwiXCJdLFxuICAgICAgICAgICAgc2xpZGVTcGVlZCA6IDMwMCxcbiAgICAgICAgICAgIHBhZ2luYXRpb25TcGVlZCA6IDQwMCxcbiAgICAgICAgICAgIHNpbmdsZUl0ZW0gOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBsb2NhdGlvbiA9IHtsYXQ6IDQyLjM0NTU3MywgbG5nOiAtNzEuMDk4MzI2fTtcblxuICAgIC8vb3BlbiBkZXRhaWwtc21hbGwgdmlld1xuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmluZm93aW5kb3csIC5saXN0X19pbWFnZS13cmFwLCAubGlzdF9fdGl0bGUsIC5ncmlkX19pbWFnZS13cmFwLCAuZ3JpZF9fdGl0bGUsIC5mdWxsLWxpc3RfX2ltYWdlLXdyYXAsIC5mdWxsLWxpc3RfX3RpdGxlJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGlkID0gZ2V0T2ZmZXJJZCgkKHRoaXMpKSxcbiAgICAgICAgICAgICR2aWV3ID0gJCgnLnZpZXcnKSxcbiAgICAgICAgICAgICRkZXRhaWwgPSAkKCcuZGV0YWlsJyksXG4gICAgICAgICAgICAkaW5mb1dpbmRvd0Nsb3NlID0gJCgnLmdtLXN0eWxlLWl3JykubmV4dCgpO1xuICAgICAgICBjbG9zZUFsbEZpbHRlcnMoKTtcbiAgICAgICAgZnVsbHNjcmVlbkRpc2FibGUob3dsLCBsb2NhdGlvbik7XG4gICAgICAgICRpbmZvV2luZG93Q2xvc2UuY2xpY2soKTtcbiAgICAgICAgJHZpZXcuZmFkZU91dCgzMDApO1xuICAgICAgICAkZGV0YWlsLmZhZGVJbigzMDApO1xuICAgIH0pO1xuXG4gICAgLy9iYWNrIHRvIHByZXYgdmlld1xuICAgICQoJy5jb250cm9sc19fYmFjaycpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkdmlldyA9ICQoJy52aWV3JyksXG4gICAgICAgICAgICAkZGV0YWlsID0gJCgnLmRldGFpbCcpO1xuICAgICAgICAkdmlldy5mYWRlSW4oMzAwKTtcbiAgICAgICAgJGRldGFpbC5mYWRlT3V0KDMwMCk7XG4gICAgfSk7XG5cbiAgICAvL3N3aXRjaCB0YWJzIGluIGRldGFpbC1zbWFsbCBpdGVtXG4gICAgJCgnLmRldGFpbF9fbmF2LWl0ZW0nKS5jbGljayhmdW5jdGlvbihlKXtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCksXG4gICAgICAgICAgICAkbmF2SXRlbSA9ICQoJy5kZXRhaWxfX25hdi1pdGVtJyksXG4gICAgICAgICAgICAkdGFiID0gJCgnLmRldGFpbF9fdGFiJyk7XG4gICAgICAgICRuYXZJdGVtLnJlbW92ZUNsYXNzKCdkZXRhaWxfX25hdi1pdGVtX2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdkZXRhaWxfX25hdi1pdGVtX2FjdGl2ZScpO1xuICAgICAgICAkdGFiLmhpZGUoKTtcbiAgICAgICAgJHRhYi5lcShpbmRleCkuc2hvdygpO1xuICAgIH0pO1xuXG4gICAgLy9zaG93L2hpZGUgdGFiXG4gICAgJCgnLmRldGFpbF9fdmlld3MgLmRldGFpbF9faWNvJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICRpY29ucyA9ICQoJy5kZXRhaWxfX3ZpZXdzIC5kZXRhaWxfX2ljbycpLFxuICAgICAgICAgICAgaW5kZXggPSAkKHRoaXMpLmluZGV4KCksXG4gICAgICAgICAgICAkdGFicyA9ICQoJy5kZXRhaWxfX2NvbnRlbnQtdGFiJyk7XG4gICAgICAgICRpY29ucy5yZW1vdmVDbGFzcygnZGV0YWlsX19pY29fYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RldGFpbF9faWNvX2FjdGl2ZScpO1xuICAgICAgICAkdGFicy5yZW1vdmVDbGFzcygnZGV0YWlsX19jb250ZW50LXRhYl9hY3RpdmUnKTtcbiAgICAgICAgJHRhYnMuZXEoaW5kZXgpLmFkZENsYXNzKCdkZXRhaWxfX2NvbnRlbnQtdGFiX2FjdGl2ZScpO1xuICAgICAgICBpZiAoJHRhYnMuZXEoaW5kZXgpLmF0dHIoJ2lkJykgPT0gJ3Bhbm9yYW1hJykgeyAvL2luaXRpYWxpemUgZ29vZ2xlIHBhbm9yYW1hXG4gICAgICAgICAgICBpbml0U3RyZWV0Vmlldyhsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCR0YWJzLmVxKGluZGV4KS5hdHRyKCdpZCcpID09ICdzbWFsbC1tYXAnKSB7IC8vaW5pdGlhbGl6ZSBnb29nbGUgc21hbGwgbWFwXG4gICAgICAgICAgICBpbml0U21hbGxNYXAobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL3Nob3cvaGlkZSBpY29uc1xuICAgICQoJy5kZXRhaWxfX2ljb19kb3RzJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICRpY29ucyA9ICQoJy5kZXRhaWxfX2ljb25zJyk7XG4gICAgICAgICRpY29ucy50b2dnbGVDbGFzcygnZGV0YWlsX19pY29uc19vcGVuZWQnKTtcbiAgICB9KTtcblxuICAgIC8vc2NyZWVuIG1vZGVcbiAgICAkKCcuY29udHJvbHNfX3NpemUnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgJGRldGFpbCA9ICQoJy5kZXRhaWwnKTtcbiAgICAgICAgaWYgKCEkZGV0YWlsLmhhc0NsYXNzKCdkZXRhaWxfZnVsbHNjcmVlbicpKSB7XG4gICAgICAgICAgICBmdWxsc2NyZWVuRW5hYmxlKG93bCwgbG9jYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnVsbHNjcmVlbkRpc2FibGUob3dsLCBsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcblxufSk7IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblxuICAgIC8vc2VhcmNoIGZvcm0gYXQgdG9wYmFyXG4gICAgJCgnLnRvcGJhcl9fZm9ybScpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWFyY2ggZm9ybSBzdWJtaXQnKTtcbiAgICB9KTtcblxuICAgIC8vdHJpZ2dlciBmb3IgZm9ybSBzdWJtaXRcbiAgICAkKCcudG9wYmFyX19pY29fc2VhcmNoJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudG9wYmFyX19mb3JtJykuc3VibWl0KCk7XG4gICAgfSk7XG5cbiAgICAvL3Zpc2liaWxpdHkgZmlsdGVyXG4gICAgJCgnLnRvcGJhcl9fYmxvY2tfdmlzaWJpbGl0eScpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkZmlsdGVyID0gJCgnLnZpc2liaWxpdHknKTtcbiAgICAgICAgc2hvd0ZpbHRlcigkZmlsdGVyKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19vcGVuZWQnKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja192aXNpYmlsaXR5LWFjdGl2ZScpO1xuICAgIH0pO1xuICAgICQoJy52aXNpYmlsaXR5X19pdGVtJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnLnZpc2liaWxpdHlfX2l0ZW0nKS5yZW1vdmVDbGFzcygndmlzaWJpbGl0eV9faXRlbV9hY3RpdmUnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndmlzaWJpbGl0eV9faXRlbV9hY3RpdmUnKTtcbiAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmRhdGEoJ3ZpZXcnKSxcbiAgICAgICAgICAgICR2aWV3ID0gJCgnLnZpZXcnKSxcbiAgICAgICAgICAgICRkZXRhaWwgPSAkKCcuZGV0YWlsJyksXG4gICAgICAgICAgICAkbGlzdCA9ICQoJy5saXN0JyksXG4gICAgICAgICAgICAkZnVsbExpc3QgPSAkKCcuZnVsbC1saXN0JyksXG4gICAgICAgICAgICAkZ3JpZCA9ICQoJy5ncmlkJyk7XG4gICAgICAgIGlmICh0eXBlID09ICdtYXAnKSB7IC8vb25seSBtYXBcbiAgICAgICAgICAgICR2aWV3LmZhZGVPdXQoMzAwKTtcbiAgICAgICAgICAgICRsaXN0LnJlbW92ZUNsYXNzKCdsaXN0X29wZW5lZCcpO1xuICAgICAgICAgICAgJGZ1bGxMaXN0LnJlbW92ZUNsYXNzKCdmdWxsLWxpc3Rfb3BlbmVkJyk7XG4gICAgICAgICAgICAkZ3JpZC5yZW1vdmVDbGFzcygnZ3JpZF9vcGVuZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT0gJ2xpc3QtbWFwJykgeyAvL2xpc3QgKyBtYXBcbiAgICAgICAgICAgICRsaXN0LnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgICAgICRsaXN0LmFkZENsYXNzKCdsaXN0X29wZW5lZCcpO1xuICAgICAgICAgICAgJGZ1bGxMaXN0LnJlbW92ZUNsYXNzKCdmdWxsLWxpc3Rfb3BlbmVkJyk7XG4gICAgICAgICAgICAkZ3JpZC5yZW1vdmVDbGFzcygnZ3JpZF9vcGVuZWQnKTtcbiAgICAgICAgICAgICR2aWV3LmZhZGVJbigzMDApO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2xpc3QnKSB7IC8vanVzdCBsaXN0XG4gICAgICAgICAgICAkZnVsbExpc3QucGVyZmVjdFNjcm9sbGJhcigpO1xuICAgICAgICAgICAgJGZ1bGxMaXN0LmFkZENsYXNzKCdmdWxsLWxpc3Rfb3BlbmVkJyk7XG4gICAgICAgICAgICAkbGlzdC5yZW1vdmVDbGFzcygnbGlzdF9vcGVuZWQnKTtcbiAgICAgICAgICAgICRncmlkLnJlbW92ZUNsYXNzKCdncmlkX29wZW5lZCcpO1xuICAgICAgICAgICAgJHZpZXcuZmFkZUluKDMwMCk7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlID09ICdncmlkJykgeyAvL2p1c3QgZ3JlZWRcbiAgICAgICAgICAgICRncmlkLnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgICAgICRncmlkLmFkZENsYXNzKCdncmlkX29wZW5lZCcpO1xuICAgICAgICAgICAgJGxpc3QucmVtb3ZlQ2xhc3MoJ2xpc3Rfb3BlbmVkJyk7XG4gICAgICAgICAgICAkZnVsbExpc3QucmVtb3ZlQ2xhc3MoJ2Z1bGwtbGlzdF9vcGVuZWQnKTtcbiAgICAgICAgICAgICR2aWV3LmZhZGVJbigzMDApO1xuICAgICAgICB9XG4gICAgICAgICRkZXRhaWwuZmFkZU91dCgzMDApO1xuICAgICAgICBjbG9zZUFsbEZpbHRlcnMoKTtcbiAgICB9KTtcblxuICAgIC8vcHJvcCBmaWx0ZXJcbiAgICAkKCcudG9wYmFyX19ibG9ja19wcm9wJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICRmaWx0ZXIgPSAkKCcucHJvcCcpO1xuICAgICAgICBzaG93RmlsdGVyKCRmaWx0ZXIpO1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCd0b3BiYXJfX2Jsb2NrX29wZW5lZCcpO1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCd0b3BiYXJfX2Jsb2NrX3Byb3AtYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvL3NvcnQgZmlsdGVyXG4gICAgJCgnLnRvcGJhcl9fYmxvY2tfc29ydCcpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkZmlsdGVyID0gJCgnLnNvcnQnKTtcbiAgICAgICAgc2hvd0ZpbHRlcigkZmlsdGVyKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19vcGVuZWQnKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19zb3J0LWFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgLy9zYXZlZCBzZWFyY2ggZmlsdGVyXG4gICAgJCgnLmJveF9fc2VhcmNoLWlucHV0JykudmFsKCcnKTsgLy9yZXNldCB2YWx1ZSBvbiBwYWdlIGxvYWRcbiAgICAkKCcudG9wYmFyX19ibG9ja19zYXZlZC1zZWFyY2gnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgJGZpbHRlciA9ICQoJy5ib3gnKTtcbiAgICAgICAgc2hvd0ZpbHRlcigkZmlsdGVyKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19vcGVuZWQnKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19zYXZlZC1zZWFyY2gtYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgJCgnLmJveF9fc2VhcmNoLWlucHV0Jykua2V5dXAoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKSxcbiAgICAgICAgICAgICRpdGVtID0gJCgnLmJveF9faXRlbScpO1xuICAgICAgICBmaWx0ZXJTZWFyY2godmFsdWUsICRpdGVtKTtcbiAgICB9KTtcbiAgICAkKCcuYm94X19nYXJiYWdlJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICAkKCcuYm94X19wbHVzJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnLm92ZXJsYXknKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgJCgnLnBvcHVwJykuZmFkZUluKDYwMCk7XG4gICAgfSk7XG4gICAgJCgnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnLm92ZXJsYXknKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICQoJy5wb3B1cCcpLmZhZGVPdXQoMzAwKTtcbiAgICB9KTtcblxuICAgIC8vZmF2b3JpdGUgZmlsdGVyXG4gICAgJCgnLmhlYXJ0X19zZWFyY2gtaW5wdXQnKS52YWwoJycpOyAvL3Jlc2V0IHZhbHVlIG9uIHBhZ2UgbG9hZFxuICAgICQoJy50b3BiYXJfX2Jsb2NrX2hlYXJ0JykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICRmaWx0ZXIgPSAkKCcuaGVhcnQnKTtcbiAgICAgICAgc2hvd0ZpbHRlcigkZmlsdGVyKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19vcGVuZWQnKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygndG9wYmFyX19ibG9ja19oZWFydC1hY3RpdmUnKTtcbiAgICB9KTtcbiAgICAkKCcuaGVhcnRfX3NlYXJjaC1pbnB1dCcpLmtleXVwKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB2YWx1ZSA9ICQodGhpcykudmFsKCksXG4gICAgICAgICAgICAkaXRlbSA9ICQoJy5oZWFydF9faXRlbScpO1xuICAgICAgICBmaWx0ZXJTZWFyY2godmFsdWUsICRpdGVtKTtcbiAgICB9KTtcbiAgICAkKCcuaGVhcnRfX2dhcmJhZ2UnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgIH0pO1xuXG4gICAgaWYgKCQoJy5wcm9wJykubGVuZ3RoKSB7XG4gICAgICAgIC8vcHJpY2Ugc2xpZGVyIGF0IG1hcCBmaWx0ZXJcbiAgICAgICAgdmFyIHByaWNlU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaWNlU2xpZGVyJyk7XG4gICAgICAgIG5vVWlTbGlkZXIuY3JlYXRlKHByaWNlU2xpZGVyLCB7XG4gICAgICAgICAgICBzdGFydDogWzUwLCA1MDAwMDBdLFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiA1MDAwMDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBwcmljZVNsaWRlclZhbHVlcyA9IFtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcm9tUHJpY2UnKSxcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b1ByaWNlJylcbiAgICAgICAgXTtcbiAgICAgICAgcHJpY2VTbGlkZXIubm9VaVNsaWRlci5vbigndXBkYXRlJywgZnVuY3Rpb24gKHZhbHVlcywgaGFuZGxlKSB7XG4gICAgICAgICAgICBwcmljZVNsaWRlclZhbHVlc1toYW5kbGVdLmlubmVySFRNTCA9ICckJyArIE1hdGgucm91bmQodmFsdWVzW2hhbmRsZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL2JlZCBzbGlkZXIgYXQgbWFwIGZpbHRlclxuICAgICAgICB2YXIgYmVkU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlZFNsaWRlcicpO1xuICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShiZWRTbGlkZXIsIHtcbiAgICAgICAgICAgIHN0YXJ0OiBbMSwgNl0sXG4gICAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiA3XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYmVkU2xpZGVyVmFsdWVzID0gW1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zyb21CZWQnKSxcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0JlZCcpXG4gICAgICAgIF07XG4gICAgICAgIGJlZFNsaWRlci5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcbiAgICAgICAgICAgIGJlZFNsaWRlclZhbHVlc1toYW5kbGVdLmlubmVySFRNTCA9IE1hdGgucm91bmQodmFsdWVzW2hhbmRsZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL2JhdGggc2xpZGVyIGF0IG1hcCBmaWx0ZXJcbiAgICAgICAgdmFyIGJhdGhTbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0aFNsaWRlcicpO1xuICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShiYXRoU2xpZGVyLCB7XG4gICAgICAgICAgICBzdGFydDogWzEsIDZdLFxuICAgICAgICAgICAgc3RlcDogMSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgIG1heDogN1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGJhdGhTbGlkZXJWYWx1ZXMgPSBbXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnJvbUJhdGgnKSxcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0JhdGgnKVxuICAgICAgICBdO1xuICAgICAgICBiYXRoU2xpZGVyLm5vVWlTbGlkZXIub24oJ3VwZGF0ZScsIGZ1bmN0aW9uICh2YWx1ZXMsIGhhbmRsZSkge1xuICAgICAgICAgICAgYmF0aFNsaWRlclZhbHVlc1toYW5kbGVdLmlubmVySFRNTCA9IE1hdGgucm91bmQodmFsdWVzW2hhbmRsZV0pO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cbiAgICAvL29wZW4gYXV0aCBmb3JtXG4gICAgJCgnLmxvZ2luJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICRwb3B1cCA9ICQoJy5hdXRoJyksXG4gICAgICAgICAgICAkb3ZlcmxheSA9ICQoJy5vdmVybGF5Jyk7XG4gICAgICAgICRvdmVybGF5LmZhZGVJbigzMDApO1xuICAgICAgICAkcG9wdXAuZmFkZUluKDYwMCk7XG4gICAgfSk7XG4gICAgJCgnLmF1dGhfX2hlYWRlci10YWInKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgJHRhYnMgPSAkKCcuYXV0aF9faGVhZGVyLXRhYicpLFxuICAgICAgICAgICAgJGZvcm1zID0gJCgnLmF1dGhfX2Zvcm0nKSxcbiAgICAgICAgICAgIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpO1xuICAgICAgICAkdGFicy5yZW1vdmVDbGFzcygnYXV0aF9faGVhZGVyLXRhYl9hY3RpdmUnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYXV0aF9faGVhZGVyLXRhYl9hY3RpdmUnKTtcbiAgICAgICAgJGZvcm1zLmhpZGUoKTtcbiAgICAgICAgJGZvcm1zLmVxKGluZGV4KS5zaG93KCk7XG4gICAgfSk7XG5cbiAgICAvL2Nsb3NlIGF1dGggZm9ybVxuICAgICQoJy5hdXRoX19jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkcG9wdXAgPSAkKCcuYXV0aCcpLFxuICAgICAgICAgICAgJG92ZXJsYXkgPSAkKCcub3ZlcmxheScpO1xuICAgICAgICAkb3ZlcmxheS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICRwb3B1cC5mYWRlT3V0KDMwMCk7XG4gICAgfSk7XG5cbiAgICAvL2Nsb3NlIG9yIG9wZW4gb3RoZXIgZmVhdHVyZXMgYXQgbWFpbi1maWx0ZXJcbiAgICAkKCcubWFpbi1maWx0ZXJfX290aGVyJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICRmZWF0dXJlcyA9ICQoJy5tYWluLWZpbHRlcl9fZmVhdHVyZXMnKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnbWFpbi1maWx0ZXJfX290aGVyX29wZW5lZCcpO1xuICAgICAgICBpZiAoJGZlYXR1cmVzLmlzKCc6dmlzaWJsZScpKVxuICAgICAgICAgICAgJGZlYXR1cmVzLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgJGZlYXR1cmVzLmZhZGVJbigxNTApO1xuICAgIH0pO1xuXG4gICAgLy9mZWF0dXJlZCBwcm9wZXJ0aWVzXG4gICAgJChcIi5vd2wtY2Fyb3VzZWxcIikub3dsQ2Fyb3VzZWwoe1xuICAgICAgICBpdGVtczogM1xuICAgIH0pO1xuXG4gICAgaWYgKCQoJy5tYWluLWZpbHRlcicpLmxlbmd0aCkge1xuICAgICAgICAvL3ByaWNlIHNsaWRlciBhdCBtYWluIGZpbHRlclxuICAgICAgICB2YXIgcHJpY2VTbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpY2VTbGlkZXInKTtcbiAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUocHJpY2VTbGlkZXIsIHtcbiAgICAgICAgICAgIHN0YXJ0OiBbNTAsIDUwMDAwMF0sXG4gICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICBtYXg6IDUwMDAwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHByaWNlU2xpZGVyVmFsdWVzID0gW1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zyb21QcmljZScpLFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvUHJpY2UnKVxuICAgICAgICBdO1xuICAgICAgICBwcmljZVNsaWRlci5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcbiAgICAgICAgICAgIHByaWNlU2xpZGVyVmFsdWVzW2hhbmRsZV0uaW5uZXJIVE1MID0gJyQnICsgTWF0aC5yb3VuZCh2YWx1ZXNbaGFuZGxlXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vYmVkIHNsaWRlciBhdCBtYWluIGZpbHRlclxuICAgICAgICB2YXIgYmVkU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlZFNsaWRlcicpO1xuICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShiZWRTbGlkZXIsIHtcbiAgICAgICAgICAgIHN0YXJ0OiBbMSwgNl0sXG4gICAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiA3XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYmVkU2xpZGVyVmFsdWVzID0gW1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zyb21CZWQnKSxcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0JlZCcpXG4gICAgICAgIF07XG4gICAgICAgIGJlZFNsaWRlci5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcbiAgICAgICAgICAgIGJlZFNsaWRlclZhbHVlc1toYW5kbGVdLmlubmVySFRNTCA9IE1hdGgucm91bmQodmFsdWVzW2hhbmRsZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL2JhdGggc2xpZGVyIGF0IG1haW4gZmlsdGVyXG4gICAgICAgIHZhciBiYXRoU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhdGhTbGlkZXInKTtcbiAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoYmF0aFNsaWRlciwge1xuICAgICAgICAgICAgc3RhcnQ6IFsxLCA2XSxcbiAgICAgICAgICAgIHN0ZXA6IDEsXG4gICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICBtYXg6IDdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBiYXRoU2xpZGVyVmFsdWVzID0gW1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zyb21CYXRoJyksXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9CYXRoJylcbiAgICAgICAgXTtcbiAgICAgICAgYmF0aFNsaWRlci5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcbiAgICAgICAgICAgIGJhdGhTbGlkZXJWYWx1ZXNbaGFuZGxlXS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKHZhbHVlc1toYW5kbGVdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9vdGhlciBwcmljZSBzbGlkZXIgYXQgbWFpbiBmaWx0ZXJcbiAgICAgICAgdmFyIG90aGVyU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ290aGVyU2xpZGVyJyk7XG4gICAgICAgIG5vVWlTbGlkZXIuY3JlYXRlKG90aGVyU2xpZGVyLCB7XG4gICAgICAgICAgICBzdGFydDogWzUwLCA1MDAwMDBdLFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiA1MDAwMDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBvdGhlclNsaWRlclZhbHVlcyA9IFtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcm9tT3RoZXInKSxcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b090aGVyJylcbiAgICAgICAgXTtcbiAgICAgICAgb3RoZXJTbGlkZXIubm9VaVNsaWRlci5vbigndXBkYXRlJywgZnVuY3Rpb24gKHZhbHVlcywgaGFuZGxlKSB7XG4gICAgICAgICAgICBvdGhlclNsaWRlclZhbHVlc1toYW5kbGVdLmlubmVySFRNTCA9ICckJyArIE1hdGgucm91bmQodmFsdWVzW2hhbmRsZV0pO1xuICAgICAgICB9KTtcbiAgICB9XG59KTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgIC8vZ29vZ2xlIG1hcCBpbml0XG4gICAgaWYgKCQoJyNtYXAnKS5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGhlYWRlciA9ICQoJy5oZWFkZXItd3JhcCcpLmhlaWdodCgpLFxuICAgICAgICAgICAgdG9wYmFyID0gJCgnLnRvcGJhci13cmFwJykuaGVpZ2h0KCksXG4gICAgICAgICAgICBmb290ZXIgPSAkKCcuZm9vdGVyLXdyYXAnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgIGhlaWdodCA9IGhlYWRlciArIHRvcGJhciArIGZvb3RlcjtcbiAgICAgICAgJCgnLm1hcC13cmFwJykuY3NzKCdoZWlnaHQnLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSBoZWlnaHQpOyAvL2NhbGN1bGF0ZSBtaW4gaGVpZ2h0IG9mIHRoZSBtYXBcblxuICAgICAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7XG4gICAgICAgIHZhciBteUxhdGxuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNDAuNzEyOTMwLCAtNzQuMDA2MzA0KTsgLy9jZW50ZXIgb2YgdGhlIG1hcFxuICAgICAgICB2YXIgc3R5bGVzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM0NDQ0NDRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjJmMmYyXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NDV9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMuaWNvblwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM0NmJjZWNcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfV07XG4gICAgICAgIHZhciBtYXBPcHRpb25zID0ge1xuICAgICAgICAgICAgem9vbTogMTIsXG4gICAgICAgICAgICBjZW50ZXI6IG15TGF0bG5nLFxuICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgc3R5bGVzIDogc3R5bGVzXG4gICAgICAgIH07XG4gICAgICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLCBtYXBPcHRpb25zKTtcbiAgICAgICAgdmFyIG1hcmtlckljbyA9ICcvYXBwL2kvbWluL21hcC1tYXJrZXIucG5nJztcbiAgICAgICAgdmFyIG9mZmVycyA9IFtcbiAgICAgICAgICAgIHtpZDogNywgbG9jYXRpb246IHtsYXQ6NDAuNzEyOTMwLCBsbmc6IC03NC4wMDYzMDR9fSxcbiAgICAgICAgICAgIHtpZDogOCwgbG9jYXRpb246IHtsYXQ6NDAuNzEyNzQwLCBsbmc6IC03NC4wMzYzMDR9fVxuICAgICAgICBdO1xuXG4gICAgICAgIHZhciBtYXJrZXJzID0gb2ZmZXJzLm1hcChmdW5jdGlvbihvZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBvZmZlci5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICBpY29uOiBtYXJrZXJJY28sXG4gICAgICAgICAgICAgICAgb2ZmZXJJRDogb2ZmZXIuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGNsdXN0ZXJPcHRpb25zID0gW3tcbiAgICAgICAgICAgIHVybDogJy9hcHAvaS9taW4vY2x1c3Rlcl9pY29uLnBuZycsXG4gICAgICAgICAgICBhbmNob3I6IFsxOCwwXSxcbiAgICAgICAgICAgIGljb25BbmNob3I6IFs1MCwgNjZdLFxuICAgICAgICAgICAgaGVpZ2h0OiAnODQnLFxuICAgICAgICAgICAgd2lkdGg6ICc1MCcsXG4gICAgICAgICAgICB0ZXh0Q29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgIHRleHRTaXplOiAnMTQnXG4gICAgICAgIH1dO1xuICAgICAgICBtYXJrZXJzLmZvckVhY2goZnVuY3Rpb24obWFya2VyKXtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwnY2xpY2snLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIG1hcEhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldEZyb21NYXBCb3R0b20gPSAxNTA7XG4gICAgICAgICAgICAgICAgbWFwLnNldENlbnRlcihtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgbWFwLnBhbkJ5KDAsIC0obWFwSGVpZ2h0IC8gMiAtIG9mZnNldEZyb21NYXBCb3R0b20pKTtcblxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHRoaXMub2ZmZXJJRDtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSAnL2FwcC9pL3VzZXJfZmlsZXMvY2hpY2Fnby5qcGcnO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICdEZXNpZ24gcGxhY2UgYXBhcnRtZW50JztcbiAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSAnJDk2NywwMDAnO1xuICAgICAgICAgICAgICAgIHZhciBwcmljZVNxZnQgPSAnJDcsNjAwL3NxZnQnO1xuICAgICAgICAgICAgICAgIHZhciBhZGRyZXNzID0gJ1F1aW5jeSBTdCwgQnJvb2tseW4sIE5ZLCBVU0EnO1xuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9ICdCZWRzOiA0LCBCYXRoczogMiwgU3EgRnQ6IDM0ODAnO1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gJ0FwYXJ0bWVudCc7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRTdHJpbmcgPVxuICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIiBkYXRhLW9mZmVyPVwiJyArIGlkICsgJ1wiIGNsYXNzPVwiaW5mb3dpbmRvd1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluZm93aW5kb3dfX2ltYWdlLXdyYXBcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiJyArIGltYWdlICsgJ1wiIGNsYXNzPVwiaW5mb3dpbmRvd19faW1hZ2VcIi8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImluZm93aW5kb3dfX3ByaWNlXCI+JyArIHByaWNlICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiaW5mb3dpbmRvd19fcHJpY2UgaW5mb3dpbmRvd19fcHJpY2VfX3NxZnRcIj4nICsgcHJpY2VTcWZ0ICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluZm93aW5kb3dfX3RpdGxlXCI+JyArIHRpdGxlICsgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluZm93aW5kb3dfX2FkZHJlc3NcIj4nICsgYWRkcmVzcyArICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbmZvd2luZG93X19wcm9wc1wiPicgKyBwcm9wcyArICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbmZvd2luZG93X190eXBlXCI+JyArIHR5cGUgKyAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2E+JztcblxuICAgICAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChjb250ZW50U3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xuXG4gICAgICAgICAgICAgICAgdmFyICRnbVN0eWxlID0gJCgnLmdtLXN0eWxlLWl3Jyk7IC8vaW5mb3dpbmRvdyB3cmFwcGVyXG4gICAgICAgICAgICAgICAgJGdtU3R5bGUucHJldigpLnJlbW92ZSgpOyAvL3JlbW92ZSBhcnJvd1xuICAgICAgICAgICAgICAgICRnbVN0eWxlLm5leHQoKS5jc3Moe3RvcDogJzM5cHgnLCByaWdodDogJzMxcHgnfSk7IC8vbW92ZSBjbG9zZSBpY29uXG4gICAgICAgICAgICAgICAgJGdtU3R5bGUuY3NzKHt0b3A6ICczNXB4JywgbGVmdDogJzI1cHgnLCBvdmVyZmxvdzogJ3Zpc2libGUnfSk7IC8vIG1vdmUgd3JhcHBlclxuICAgICAgICAgICAgICAgICRnbVN0eWxlLmNoaWxkcmVuKCkuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7IC8vc2V0IG92ZXJmbG93IHRvIHNob3cgc2hhZG93LWJveFxuICAgICAgICAgICAgICAgICRnbVN0eWxlLmNoaWxkcmVuKCkuY2hpbGRyZW4oKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1hcmtlckNsdXN0ZXIgPSBuZXcgTWFya2VyQ2x1c3RlcmVyKG1hcCwgbWFya2Vycyk7XG4gICAgICAgIG1hcmtlckNsdXN0ZXIuc2V0U3R5bGVzKGNsdXN0ZXJPcHRpb25zKTtcbiAgICB9XG5cbn0pOyJdfQ==
